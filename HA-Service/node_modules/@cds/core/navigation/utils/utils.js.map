{"version":3,"file":"utils.js","sources":["../../../../src/navigation/utils/utils.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { setOrRemoveAttribute } from '@cds/core/internal';\nexport const NAVIGATION_TEXT_WRAPPER = 'cds-navigation-sr-text';\nexport const DEFAULT_NAVIGATION_LAYOUT = 'vertical';\nexport function getNextFocusElement(current, elements) {\n    const idx = elements.indexOf(current);\n    return elements[idx + 1] ? elements[idx + 1] : elements[0];\n}\nexport function getPreviousFocusElement(current, elements) {\n    const idx = elements.indexOf(current);\n    return elements[idx - 1] ? elements[idx - 1] : elements[elements.length - 1];\n}\nexport function getToggleIconDirection(element) {\n    if (element.isGroupStart) {\n        return element.expanded ? 'down' : 'right';\n    }\n    else {\n        return element.expandedRoot ? 'left' : 'right';\n    }\n}\nexport function manageScreenReaderElements(element, expandedRoot) {\n    const span = element.querySelector('span');\n    if (span) {\n        setOrRemoveAttribute(span, ['cds-layout', 'display:screen-reader-only'], () => {\n            return !expandedRoot;\n        });\n    }\n}\nexport function removeFocus(element) {\n    element.hasFocus = false;\n}\nexport function setFocus(element) {\n    element.hasFocus = true;\n    element.scrollIntoView(); // Bring elements that are hidden by overflow into viewport\n}\nexport function visibleElement(element) {\n    const elementType = element?.tagName;\n    const grandparent = element?.parentElement?.parentElement;\n    switch (elementType) {\n        case 'CDS-NAVIGATION-ITEM':\n            return element.hasAttribute('_expanded-group');\n        case 'CDS-NAVIGATION-START':\n            return !(grandparent?.tagName === 'CDS-NAVIGATION-GROUP' && !grandparent?.hasAttribute('expanded'));\n        default:\n            return false;\n    }\n}\n"],"names":["NAVIGATION_TEXT_WRAPPER","DEFAULT_NAVIGATION_LAYOUT","getNextFocusElement","current","elements","idx","indexOf","getPreviousFocusElement","length","getToggleIconDirection","element","isGroupStart","expanded","expandedRoot","manageScreenReaderElements","span","querySelector","setOrRemoveAttribute","removeFocus","hasFocus","setFocus","scrollIntoView","visibleElement","elementType","tagName","grandparent","parentElement","hasAttribute"],"mappings":"0DAMY,MAACA,EAA0B,yBAC1BC,EAA4B,WAClC,SAASC,EAAoBC,EAASC,GACzC,MAAMC,EAAMD,EAASE,QAAQH,GAC7B,OAAOC,EAASC,EAAM,GAAKD,EAASC,EAAM,GAAKD,EAAS,GAErD,SAASG,EAAwBJ,EAASC,GAC7C,MAAMC,EAAMD,EAASE,QAAQH,GAC7B,OAAOC,EAASC,EAAM,GAAKD,EAASC,EAAM,GAAKD,EAASA,EAASI,OAAS,GAEvE,SAASC,EAAuBC,GACnC,OAAIA,EAAQC,aACDD,EAAQE,SAAW,OAAS,QAG5BF,EAAQG,aAAe,OAAS,QAGxC,SAASC,EAA2BJ,EAASG,GAChD,MAAME,EAAOL,EAAQM,cAAc,QAC/BD,GACAE,EAAqBF,EAAM,CAAC,aAAc,+BAA+B,KAC7DF,IAIb,SAASK,EAAYR,GACxBA,EAAQS,UAAW,EAEhB,SAASC,EAASV,GACrBA,EAAQS,UAAW,EACnBT,EAAQW,iBAEL,SAASC,EAAeZ,GAC3B,MAAMa,EAAcb,GAASc,QACvBC,EAAcf,GAASgB,eAAeA,cAC5C,OAAQH,GACJ,IAAK,sBACD,OAAOb,EAAQiB,aAAa,mBAChC,IAAK,uBACD,QAAkC,yBAAzBF,GAAaD,UAAuCC,GAAaE,aAAa,aAC3F,QACI,OAAO"}