{"version":3,"file":"grid-column-position.controller.js","sources":["../../../../src/grid/column/grid-column-position.controller.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nexport class GridColumnPositionController {\n    constructor(host) {\n        this.host = host;\n        this.previousPosition = '';\n        this.host.addController(this);\n    }\n    get hostGrid() {\n        return this.host.parentElement;\n    }\n    async hostUpdated() {\n        await this.host.updateComplete;\n        if (this.host.ariaColIndex && this.host.position !== this.previousPosition) {\n            this.previousPosition = this.host.position;\n            if (!this.styles) {\n                this.styles = document.createElement('style');\n                this.hostGrid.append(this.styles);\n            }\n            this.calculateColumnPositionStyles();\n        }\n    }\n    calculateColumnPositionStyles() {\n        const gridPosition = this.hostGrid.getBoundingClientRect();\n        const side = this.host.offsetLeft < gridPosition.width / 2 ? 'left' : 'right';\n        this.styles.innerHTML = `${this.getPositionStyle(side, gridPosition)}\\n${this.borderStyle(side)}`;\n    }\n    getPositionStyle(side, gridPosition) {\n        const position = this.host.getBoundingClientRect();\n        const left = this.host.position === 'fixed' ? `${position.left - gridPosition.left - 1}px` : 'initial';\n        const right = this.host.position === 'fixed' ? `${position.right - position.left - position.width}px` : 'initial';\n        return `\n    [__id='${this.hostGrid._id}'] [aria-colindex=\"${this.host.ariaColIndex}\"] {\n      ${side === 'left' ? `left: ${left};` : ''}\n      ${side === 'right' ? `right: ${right};` : ''}\n      ${this.host.position === 'sticky' ? `left: 0px;` : ''}\n    }\n\n    [__id='${this.hostGrid._id}'] cds-grid-cell[aria-colindex=\"${this.host.ariaColIndex}\"] {\n      z-index: 98;\n    }`;\n    }\n    borderStyle(side) {\n        const lastofLeft = side === 'left' && this.host.nextElementSibling.position !== this.host.position;\n        const lastofRight = side === 'right' && this.host.previousElementSibling.position !== this.host.position;\n        if (this.host.position !== '' && (lastofLeft || lastofRight)) {\n            // todo: test last of position\n            return `\n      [__id='${this.hostGrid._id}'] cds-grid-cell[aria-colindex=\"${this.host.ariaColIndex}\"] {\n        --border-${side === 'left' ? 'right' : 'left'}: var(--cds-alias-object-border-width-100) solid var(--cds-alias-object-border-color);\n      }`;\n        }\n        else {\n            return '';\n        }\n    }\n}\n"],"names":["GridColumnPositionController","constructor","host","this","previousPosition","addController","hostGrid","parentElement","async","updateComplete","ariaColIndex","position","styles","document","createElement","append","calculateColumnPositionStyles","gridPosition","getBoundingClientRect","side","offsetLeft","width","innerHTML","getPositionStyle","borderStyle","left","right","_id","lastofLeft","nextElementSibling","lastofRight","previousElementSibling"],"mappings":"AAKO,MAAMA,EACTC,YAAYC,GACRC,KAAKD,KAAOA,EACZC,KAAKC,iBAAmB,GACxBD,KAAKD,KAAKG,cAAcF,MAExBG,eACA,OAAOH,KAAKD,KAAKK,cAErBC,0BACUL,KAAKD,KAAKO,eACZN,KAAKD,KAAKQ,cAAgBP,KAAKD,KAAKS,WAAaR,KAAKC,mBACtDD,KAAKC,iBAAmBD,KAAKD,KAAKS,SAC7BR,KAAKS,SACNT,KAAKS,OAASC,SAASC,cAAc,SACrCX,KAAKG,SAASS,OAAOZ,KAAKS,SAE9BT,KAAKa,iCAGbA,gCACI,MAAMC,EAAed,KAAKG,SAASY,wBAC7BC,EAAOhB,KAAKD,KAAKkB,WAAaH,EAAaI,MAAQ,EAAI,OAAS,QACtElB,KAAKS,OAAOU,UAAY,GAAGnB,KAAKoB,iBAAiBJ,EAAMF,OAAkBd,KAAKqB,YAAYL,KAE9FI,iBAAiBJ,EAAMF,GACnB,MAAMN,EAAWR,KAAKD,KAAKgB,wBACrBO,EAA8B,UAAvBtB,KAAKD,KAAKS,SAA0BA,EAASc,KAAOR,EAAaQ,KAAO,EAAvC,KAA+C,UACvFC,EAA+B,UAAvBvB,KAAKD,KAAKS,SAA0BA,EAASe,MAAQf,EAASc,KAAOd,EAASU,MAA7C,KAAyD,UACxG,MAAO,gBACFlB,KAAKG,SAASqB,yBAAyBxB,KAAKD,KAAKQ,2BAC7C,SAATS,EAAkB,SAASM,KAAU,aAC5B,UAATN,EAAmB,UAAUO,KAAW,aACjB,WAAvBvB,KAAKD,KAAKS,SAAwB,aAAe,2BAG5CR,KAAKG,SAASqB,sCAAsCxB,KAAKD,KAAKQ,8CAIvEc,YAAYL,GACR,MAAMS,EAAsB,SAATT,GAAmBhB,KAAKD,KAAK2B,mBAAmBlB,WAAaR,KAAKD,KAAKS,SACpFmB,EAAuB,UAATX,GAAoBhB,KAAKD,KAAK6B,uBAAuBpB,WAAaR,KAAKD,KAAKS,SAChG,MAA2B,KAAvBR,KAAKD,KAAKS,WAAoBiB,GAAcE,GAErC,kBACJ3B,KAAKG,SAASqB,sCAAsCxB,KAAKD,KAAKQ,sCACjD,SAATS,EAAkB,QAAU,wGAI5B"}