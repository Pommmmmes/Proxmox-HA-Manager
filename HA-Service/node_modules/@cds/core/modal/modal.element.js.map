{"version":3,"file":"modal.element.js","sources":["../../../src/modal/modal.element.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { __decorate } from \"tslib\";\nimport { html } from 'lit';\nimport { query } from 'lit/decorators/query.js';\nimport { animate, AnimationModalEnterName, i18n, I18nService, isScrollable, property, reverseAnimation, querySlot, getElementUpdates, } from '@cds/core/internal';\nimport { CdsInternalOverlay } from '@cds/core/internal-components/overlay';\nimport styles from './modal.element.scss';\n/**\n * Web component modal.\n *\n * ```typescript\n * import '@cds/core/modal/register.js';\n * ```\n *\n * ```html\n * <cds-modal>\n *   <cds-modal-header>\n *      <h3 cds-text=\"title\">My Modal</h3>\n *   </cds-modal-header>\n *   <cds-modal-content>\n *     <p>Lorem Ipsum</p>\n *   </cds-modal-content>\n *   <cds-modal-actions>\n *       <cds-button>Ok</cds-button>\n *   </cds-modal-actions>\n * </cds-modal>\n * ```\n *\n * @element cds-modal\n * @slot\n * @slot cds-modal-content\n * @slot cds-modal-header\n * @slot cds-modal-actions\n * @event closeChange - notify when the user has clicked the close button\n * @cssprop --backdrop-background - inherited from the internal overlay component\n * @cssprop --layered-backdrop-background - inherited from the internal overlay component\n * @cssprop --border-color\n * @cssprop --border-width\n * @cssprop --border-radius\n * @cssprop --background\n * @cssprop --box-shadow\n * @cssprop --width\n * @cssprop --content-overflow - set as { x, y }. take care when customizing because overflow settings can have unintended side effects.\n * @cssprop --max-height - sets hard limit on height of modal\n * @cssprop --tablet-max-height - sets hard limit on height of modal when on a tablet in landscape mode\n */\nlet CdsModal = class CdsModal extends CdsInternalOverlay {\n    constructor() {\n        super(...arguments);\n        this.i18n = I18nService.keys.modal;\n        /** If false, the modal will not render the close button.  */\n        this.closable = true;\n        this.isScrollable = false;\n        this.observers = [];\n    }\n    get customBumpers() {\n        return [this.modalHeader, this.modalFooter];\n    }\n    static get styles() {\n        return [...super.styles, styles];\n    }\n    // modal-body requires a tab index so it can be scrolled\n    render() {\n        return html `\n      ${this.backdropTemplate}\n      <div class=\"modal-dialog private-host\" tabindex=\"-1\" cds-layout=\"m:md m@md:xl\">\n        <div cds-layout=\"display:screen-reader-only\">${this.i18n.contentStart}</div>\n        <div class=\"modal-content\" cds-layout=\"vertical gap:sm gap@md:lg align:stretch p-y:lg\">\n          <div cds-layout=\"horizontal gap:sm wrap:none align:vertical-center p-x:lg\">\n            <div>\n              <slot name=\"modal-header\"></slot>\n            </div>\n            <div cds-layout=\"align:right\">\n              <slot name=\"modal-header-actions\"></slot>\n            </div>\n            ${this.closable ? this.closeButtonTemplate : ''}\n          </div>\n          <div class=\"modal-body\" cds-layout=\"p-x:lg\">\n            <slot></slot>\n          </div>\n          <div cds-layout=\"align-stretch p-x:lg\" ?hidden=${!this.modalFooter}>\n            <slot name=\"modal-actions\" @slotchange=${() => this.requestUpdate()}></slot>\n          </div>\n        </div>\n        <div cds-layout=\"display:screen-reader-only\">${this.i18n.contentEnd}</div>\n      </div>\n    `;\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.observers.push(getElementUpdates(this, 'hidden', () => this.setScrollableProperties()));\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.observers.forEach(o => o?.disconnect());\n    }\n    async setScrollableProperties() {\n        const contentElement = this.content;\n        if (this.hidden === false && contentElement !== null) {\n            await this.updateComplete; // wait until after render to measure if scrollable\n            this.isScrollable = isScrollable(contentElement);\n            contentElement.tabIndex = this.isScrollable ? 0 : -1;\n            contentElement.ariaLabel = this.isScrollable ? this.i18n.contentBox : null;\n        }\n    }\n};\n__decorate([\n    i18n()\n], CdsModal.prototype, \"i18n\", void 0);\n__decorate([\n    property({ type: Boolean })\n], CdsModal.prototype, \"closable\", void 0);\n__decorate([\n    property({ type: String })\n], CdsModal.prototype, \"size\", void 0);\n__decorate([\n    query('.modal-body')\n], CdsModal.prototype, \"content\", void 0);\n__decorate([\n    querySlot('cds-modal-header')\n], CdsModal.prototype, \"modalHeader\", void 0);\n__decorate([\n    querySlot('cds-modal-actions')\n], CdsModal.prototype, \"modalFooter\", void 0);\nCdsModal = __decorate([\n    animate({\n        hidden: {\n            true: reverseAnimation(AnimationModalEnterName),\n            false: AnimationModalEnterName,\n        },\n    })\n], CdsModal);\nexport { CdsModal };\n"],"names":["CdsModal","CdsInternalOverlay","constructor","super","this","i18n","I18nService","keys","modal","closable","isScrollable","observers","customBumpers","modalHeader","modalFooter","styles","render","html","backdropTemplate","contentStart","closeButtonTemplate","requestUpdate","contentEnd","connectedCallback","push","getElementUpdates","setScrollableProperties","disconnectedCallback","forEach","o","disconnect","async","contentElement","content","hidden","updateComplete","tabIndex","ariaLabel","contentBox","__decorate","prototype","property","type","Boolean","String","query","querySlot","animate","true","reverseAnimation","AnimationModalEnterName","false"],"mappings":"iaAkDG,IAACA,EAAW,cAAuBC,EAClCC,cACIC,oBACAC,KAAKC,KAAOC,EAAYC,KAAKC,MAE7BJ,KAAKK,UAAW,EAChBL,KAAKM,cAAe,EACpBN,KAAKO,UAAY,GAEjBC,oBACA,MAAO,CAACR,KAAKS,YAAaT,KAAKU,aAExBC,oBACP,MAAO,IAAIZ,MAAMY,OAAQA,GAG7BC,SACI,OAAOC,CAAK,GACZb,KAAKc,+IAE0Cd,KAAKC,KAAKc,gTASnDf,KAAKK,SAAWL,KAAKgB,oBAAsB,2HAKGhB,KAAKU,wDACZ,IAAMV,KAAKiB,oFAGTjB,KAAKC,KAAKiB,yBAI7DC,oBACIpB,MAAMoB,oBACNnB,KAAKO,UAAUa,KAAKC,EAAkBrB,KAAM,UAAU,IAAMA,KAAKsB,6BAErEC,uBACIxB,MAAMwB,uBACNvB,KAAKO,UAAUiB,SAAQC,GAAKA,GAAGC,eAEnCC,gCACI,MAAMC,EAAiB5B,KAAK6B,SACR,IAAhB7B,KAAK8B,QAAuC,OAAnBF,UACnB5B,KAAK+B,eACX/B,KAAKM,aAAeA,EAAasB,GACjCA,EAAeI,SAAWhC,KAAKM,aAAe,GAAK,EACnDsB,EAAeK,UAAYjC,KAAKM,aAAeN,KAAKC,KAAKiC,WAAa,QAIlFC,EAAW,CACPlC,KACDL,EAASwC,UAAW,YAAQ,GAC/BD,EAAW,CACPE,EAAS,CAAEC,KAAMC,WAClB3C,EAASwC,UAAW,gBAAY,GACnCD,EAAW,CACPE,EAAS,CAAEC,KAAME,UAClB5C,EAASwC,UAAW,YAAQ,GAC/BD,EAAW,CACPM,EAAM,gBACP7C,EAASwC,UAAW,eAAW,GAClCD,EAAW,CACPO,EAAU,qBACX9C,EAASwC,UAAW,mBAAe,GACtCD,EAAW,CACPO,EAAU,sBACX9C,EAASwC,UAAW,mBAAe,GACtCxC,EAAWuC,EAAW,CAClBQ,EAAQ,CACJb,OAAQ,CACJc,KAAMC,EAAiBC,GACvBC,MAAOD,MAGhBlD"}