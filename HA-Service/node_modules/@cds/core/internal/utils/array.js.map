{"version":3,"file":"array.js","sources":["../../../../src/internal/utils/array.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nexport function arrayToObject(arr, key) {\n    return arr.reduce((obj, item) => {\n        obj[item[key]] = item;\n        return obj;\n    }, {});\n}\nexport function arrayTail(arr) {\n    return arr.length ? arr[arr.length - 1] : void 0;\n}\nexport function arrayHead(arr) {\n    return arr.length ? arr[0] : void 0;\n}\nexport function previousInArray(current, arr) {\n    const idx = arr.indexOf(current);\n    return idx === -1 ? void 0 : arr[Math.max(idx - 1, 0)];\n}\nexport function nextInArray(current, arr) {\n    const idx = arr.indexOf(current);\n    return idx === -1 ? void 0 : arr[Math.min(idx + 1, arr.length - 1)];\n}\nexport function arrayRemoveFirstInstance(val, arr) {\n    const newArr = Array.from(arr);\n    const i = arr.indexOf(val);\n    if (i > -1) {\n        newArr.splice(i, 1);\n    }\n    return newArr;\n}\nexport function arrayRemoveLastInstance(val, arr) {\n    const reversedArr = Array.from(arr).reverse();\n    return arrayRemoveFirstInstance(val, reversedArr).reverse();\n}\nexport function arrayRemoveAllInstances(val, arr) {\n    const arrayRemovalMachine = [].concat(val);\n    return arr.filter(item => !arrayRemovalMachine.includes(item));\n}\nexport function groupArray(arr, size) {\n    return [...arr].reduce((acc, val, i) => {\n        const idx = Math.floor(i / size);\n        const page = acc[idx] || (acc[idx] = []);\n        page.push(val);\n        return acc;\n    }, []);\n}\nexport async function* asyncGroupArray(items, batch = 100) {\n    const values = groupArray(items, batch);\n    for (let i = 0; i < values.length; i++) {\n        yield values[i];\n        await new Promise(r => setTimeout(r, 0));\n    }\n}\n"],"names":["arrayToObject","arr","key","reduce","obj","item","arrayTail","length","arrayHead","previousInArray","current","idx","indexOf","Math","max","nextInArray","min","arrayRemoveFirstInstance","val","newArr","Array","from","i","splice","arrayRemoveLastInstance","reverse","arrayRemoveAllInstances","arrayRemovalMachine","concat","filter","includes","groupArray","size","acc","floor","push","async","asyncGroupArray","items","batch","values","Promise","r","setTimeout"],"mappings":"AAKO,SAASA,EAAcC,EAAKC,GAC/B,OAAOD,EAAIE,QAAO,CAACC,EAAKC,KACpBD,EAAIC,EAAKH,IAAQG,EACVD,IACR,IAEA,SAASE,EAAUL,GACtB,OAAOA,EAAIM,OAASN,EAAIA,EAAIM,OAAS,QAAK,EAEvC,SAASC,EAAUP,GACtB,OAAOA,EAAIM,OAASN,EAAI,QAAK,EAE1B,SAASQ,EAAgBC,EAAST,GACrC,MAAMU,EAAMV,EAAIW,QAAQF,GACxB,OAAgB,IAATC,OAAa,EAASV,EAAIY,KAAKC,IAAIH,EAAM,EAAG,IAEhD,SAASI,EAAYL,EAAST,GACjC,MAAMU,EAAMV,EAAIW,QAAQF,GACxB,OAAgB,IAATC,OAAa,EAASV,EAAIY,KAAKG,IAAIL,EAAM,EAAGV,EAAIM,OAAS,IAE7D,SAASU,EAAyBC,EAAKjB,GAC1C,MAAMkB,EAASC,MAAMC,KAAKpB,GACpBqB,EAAIrB,EAAIW,QAAQM,GAItB,OAHII,GAAK,GACLH,EAAOI,OAAOD,EAAG,GAEdH,EAEJ,SAASK,EAAwBN,EAAKjB,GAEzC,OAAOgB,EAAyBC,EADZE,MAAMC,KAAKpB,GAAKwB,WACcA,UAE/C,SAASC,EAAwBR,EAAKjB,GACzC,MAAM0B,EAAsB,GAAGC,OAAOV,GACtC,OAAOjB,EAAI4B,QAAOxB,IAASsB,EAAoBG,SAASzB,KAErD,SAAS0B,EAAW9B,EAAK+B,GAC5B,MAAO,IAAI/B,GAAKE,QAAO,CAAC8B,EAAKf,EAAKI,KAC9B,MAAMX,EAAME,KAAKqB,MAAMZ,EAAIU,GAG3B,OAFaC,EAAItB,KAASsB,EAAItB,GAAO,KAChCwB,KAAKjB,GACHe,IACR,IAEAG,eAAgBC,EAAgBC,EAAOC,EAAQ,KAClD,MAAMC,EAAST,EAAWO,EAAOC,GACjC,IAAK,IAAIjB,EAAI,EAAGA,EAAIkB,EAAOjC,OAAQe,UACzBkB,EAAOlB,SACP,IAAImB,SAAQC,GAAKC,WAAWD,EAAG"}