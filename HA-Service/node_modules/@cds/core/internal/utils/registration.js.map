{"version":3,"file":"registration.js","sources":["../../../../src/internal/utils/registration.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport curryN from 'ramda/es/curryN';\nimport { isBrowser } from './environment.js';\nimport { elementExists, existsInWindow } from './exists.js';\nimport { setupCDSGlobal } from './global.js';\nimport { isStorybook } from './framework.js';\nimport { LogService } from '../services/log.service.js';\nconst addElementToRegistry = curryN(3, (tagName, elementClass, registry) => {\n    if (elementExists(tagName) && !isStorybook()) {\n        LogService.warn(`${tagName} has already been registered`);\n    }\n    else {\n        registry.define(tagName, elementClass);\n        setupCDSGlobal();\n        if (window && !Object.keys(window.CDS._state.elementRegistry).some(i => i === tagName)) {\n            window.CDS._state.elementRegistry = { ...window.CDS._state.elementRegistry, [tagName]: {} };\n        }\n    }\n});\nexport function registerElementSafely(tagName, elementClass) {\n    if (isBrowser() && existsInWindow(['customElements'])) {\n        addElementToRegistry(tagName, elementClass, window.customElements);\n    }\n}\n"],"names":["addElementToRegistry","curryN","tagName","elementClass","registry","elementExists","isStorybook","LogService","warn","define","setupCDSGlobal","window","Object","keys","CDS","_state","elementRegistry","some","i","registerElementSafely","isBrowser","existsInWindow","customElements"],"mappings":"8RAWA,MAAMA,EAAuBC,EAAO,GAAG,CAACC,EAASC,EAAcC,KACvDC,EAAcH,KAAaI,IAC3BC,EAAWC,KAAQN,EAAH,iCAGhBE,EAASK,OAAOP,EAASC,GACzBO,IACIC,SAAWC,OAAOC,KAAKF,OAAOG,IAAIC,OAAOC,iBAAiBC,MAAKC,GAAKA,IAAMhB,MAC1ES,OAAOG,IAAIC,OAAOC,gBAAkB,IAAKL,OAAOG,IAAIC,OAAOC,gBAAiBd,CAACA,GAAU,SAI5F,SAASiB,EAAsBjB,EAASC,GACvCiB,KAAeC,EAAe,CAAC,oBAC/BrB,EAAqBE,EAASC,EAAcQ,OAAOW"}