{"version":3,"file":"aria-popup.controller.js","sources":["../../../../src/internal/controllers/aria-popup.controller.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { listenForAttributeChange } from '../utils/events.js';\nimport { TriggerController } from './trigger.controller.js';\n/**\n * Provides all nessesary aria-* attributes to create a vaild aria popup.\n * Used in combination of the `@ariaPopupTrigger` controller.\n */\nexport function ariaPopup() {\n    return (target) => target.addInitializer((instance) => new AriaPopupController(instance));\n}\nexport class AriaPopupController {\n    constructor(host) {\n        this.host = host;\n        this.host.addController(this);\n        this.trigger = new TriggerController(this.host, { focus: false });\n    }\n    async hostConnected() {\n        await this.host.updateComplete;\n        this.observer = listenForAttributeChange(this.host, 'hidden', () => this.updateTrigger(!this.host.hidden));\n    }\n    async hostUpdate() {\n        await this.host.updateComplete;\n        this.updateTrigger(!this.host.hidden);\n    }\n    hostDisconnected() {\n        this.updateTrigger(false);\n        this.observer?.disconnect();\n    }\n    updateTrigger(expanded) {\n        if (this.trigger.current?.hasAttribute('aria-controls')) {\n            this.trigger.current.ariaExpanded = `${expanded}`;\n        }\n        if (this.trigger.prev?.hasAttribute('aria-controls') && this.trigger.prev !== this.trigger.current) {\n            this.trigger.prev.ariaExpanded = 'false';\n        }\n    }\n}\n"],"names":["ariaPopup","target","addInitializer","instance","AriaPopupController","constructor","host","this","addController","trigger","TriggerController","focus","async","updateComplete","observer","listenForAttributeChange","updateTrigger","hidden","hostDisconnected","disconnect","expanded","current","hasAttribute","ariaExpanded","prev"],"mappings":"0HAWO,SAASA,IACZ,OAAQC,GAAWA,EAAOC,gBAAgBC,GAAa,IAAIC,EAAoBD,KAE5E,MAAMC,EACTC,YAAYC,GACRC,KAAKD,KAAOA,EACZC,KAAKD,KAAKE,cAAcD,MACxBA,KAAKE,QAAU,IAAIC,EAAkBH,KAAKD,KAAM,CAAEK,OAAO,IAE7DC,4BACUL,KAAKD,KAAKO,eAChBN,KAAKO,SAAWC,EAAyBR,KAAKD,KAAM,UAAU,IAAMC,KAAKS,eAAeT,KAAKD,KAAKW,UAEtGL,yBACUL,KAAKD,KAAKO,eAChBN,KAAKS,eAAeT,KAAKD,KAAKW,QAElCC,mBACIX,KAAKS,eAAc,GACnBT,KAAKO,UAAUK,aAEnBH,cAAcI,GACNb,KAAKE,QAAQY,SAASC,aAAa,mBACnCf,KAAKE,QAAQY,QAAQE,aAAe,GAAGH,GAEvCb,KAAKE,QAAQe,MAAMF,aAAa,kBAAoBf,KAAKE,QAAQe,OAASjB,KAAKE,QAAQY,UACvFd,KAAKE,QAAQe,KAAKD,aAAe"}