{"version":3,"file":"closable.controller.js","sources":["../../../../src/internal/controllers/closable.controller.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { onEscape, onFocusOut } from '../utils/focus.js';\n/**\n * Given a closable component provides the following\n * - close on escape\n * - close on focusout\n * - close on custom event\n */\nexport function closable(config = {}) {\n    return (target) => {\n        target.addInitializer((instance) => {\n            if (!instance.closableController) {\n                instance.closableController = new ClosableController(instance, config);\n            }\n        });\n    };\n}\nexport class ClosableController {\n    constructor(host, config = {}) {\n        this.host = host;\n        this.config = { escape: true, focusout: false, ...config };\n        this.host.addController(this);\n    }\n    hostConnected() {\n        if (this.config.escape) {\n            onEscape(this.host, () => this.close('escape-keypress'));\n        }\n        if (this.config.focusout) {\n            this.host.tabIndex = 0; // for a11y focus out https://stackoverflow.com/questions/152975/how-do-i-detect-a-click-outside-an-element\n            onFocusOut(this.host, () => this.close('focusout'));\n        }\n    }\n    close(detail) {\n        this.host.dispatchEvent(new CustomEvent('closeChange', { detail }));\n    }\n}\n"],"names":["closable","config","target","addInitializer","instance","closableController","ClosableController","constructor","host","this","escape","focusout","addController","hostConnected","onEscape","close","tabIndex","onFocusOut","detail","dispatchEvent","CustomEvent"],"mappings":"6DAYO,SAASA,EAASC,EAAS,IAC9B,OAAQC,IACJA,EAAOC,gBAAgBC,IACdA,EAASC,qBACVD,EAASC,mBAAqB,IAAIC,EAAmBF,EAAUH,QAKxE,MAAMK,EACTC,YAAYC,EAAMP,EAAS,IACvBQ,KAAKD,KAAOA,EACZC,KAAKR,OAAS,CAAES,QAAQ,EAAMC,UAAU,KAAUV,GAClDQ,KAAKD,KAAKI,cAAcH,MAE5BI,gBACQJ,KAAKR,OAAOS,QACZI,EAASL,KAAKD,MAAM,IAAMC,KAAKM,MAAM,qBAErCN,KAAKR,OAAOU,WACZF,KAAKD,KAAKQ,SAAW,EACrBC,EAAWR,KAAKD,MAAM,IAAMC,KAAKM,MAAM,eAG/CA,MAAMG,GACFT,KAAKD,KAAKW,cAAc,IAAIC,YAAY,cAAe,CAAEF,OAAAA"}