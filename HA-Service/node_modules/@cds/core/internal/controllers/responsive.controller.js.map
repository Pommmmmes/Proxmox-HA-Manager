{"version":3,"file":"responsive.controller.js","sources":["../../../../src/internal/controllers/responsive.controller.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n/**\n * Provides a `cdsResizeChange` event when component dimensions are resized\n */\nexport function responsive(config = { skipFirst: false }) {\n    return (target) => target.addInitializer((instance) => new ResponsiveController(instance, config));\n}\nexport class ResponsiveController {\n    constructor(host, config = { skipFirst: false }) {\n        this.host = host;\n        this.skipFirst = false;\n        this.host.addController(this);\n        this.skipFirst = !!config.skipFirst;\n        this.resizeElement = config.element ? config.element : this.host;\n    }\n    async hostConnected() {\n        await this.host.updateComplete;\n        this.observer = new ResizeObserver(entries => {\n            window.requestAnimationFrame(() => {\n                if (this.skipFirst) {\n                    this.skipFirst = false;\n                }\n                else {\n                    this.host.dispatchEvent(new CustomEvent('cdsResizeChange', { detail: entries[0].contentRect }));\n                    this.host.requestUpdate();\n                }\n            });\n        });\n        this.observer.observe(this.resizeElement);\n    }\n    hostDisconnected() {\n        this.observer?.disconnect();\n    }\n}\n"],"names":["responsive","config","skipFirst","target","addInitializer","instance","ResponsiveController","constructor","host","this","addController","resizeElement","element","async","updateComplete","observer","ResizeObserver","entries","window","requestAnimationFrame","dispatchEvent","CustomEvent","detail","contentRect","requestUpdate","observe","hostDisconnected","disconnect"],"mappings":"AAQO,SAASA,EAAWC,EAAS,CAAEC,WAAW,IAC7C,OAAQC,GAAWA,EAAOC,gBAAgBC,GAAa,IAAIC,EAAqBD,EAAUJ,KAEvF,MAAMK,EACTC,YAAYC,EAAMP,EAAS,CAAEC,WAAW,IACpCO,KAAKD,KAAOA,EACZC,KAAKP,WAAY,EACjBO,KAAKD,KAAKE,cAAcD,MACxBA,KAAKP,YAAcD,EAAOC,UAC1BO,KAAKE,cAAgBV,EAAOW,QAAUX,EAAOW,QAAUH,KAAKD,KAEhEK,4BACUJ,KAAKD,KAAKM,eAChBL,KAAKM,SAAW,IAAIC,gBAAeC,IAC/BC,OAAOC,uBAAsB,KACrBV,KAAKP,UACLO,KAAKP,WAAY,GAGjBO,KAAKD,KAAKY,cAAc,IAAIC,YAAY,kBAAmB,CAAEC,OAAQL,EAAQ,GAAGM,eAChFd,KAAKD,KAAKgB,uBAItBf,KAAKM,SAASU,QAAQhB,KAAKE,eAE/Be,mBACIjB,KAAKM,UAAUY"}