{"version":3,"file":"active.controller.js","sources":["../../../../src/internal/controllers/active.controller.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\n/**\n * This mimics the mouse-click visual behavior for keyboard only users and screen readers.\n * Browsers do not apply the CSS psuedo-selector :active in those instances. So we need this\n * for our :active styles to show.\n *\n * Make sure to update a component's CSS to account for the presence of the [cds-active] attribute\n * in all instance where :active is defined.\n */\nexport function active() {\n    return (target) => target.addInitializer((instance) => new ActiveController(instance));\n}\nexport class ActiveController {\n    constructor(host) {\n        this.host = host;\n        this.host.addController(this);\n    }\n    async hostConnected() {\n        await this.host.updateComplete;\n        this.host.addEventListener('keydown', (e) => this.emulateActive(e));\n        this.host.addEventListener('mousedown', (e) => this.emulateActive(e));\n        this.host.addEventListener('keyup', () => this.emulateInactive());\n        this.host.addEventListener('blur', () => this.emulateInactive());\n        this.host.addEventListener('mouseup', () => this.emulateInactive());\n    }\n    emulateActive(e) {\n        if (!this.host.disabled) {\n            this.host?.setAttribute('cds-active', '');\n        }\n        if (e.code === 'Space' && e.target === this.host) {\n            e.preventDefault(); // prevent space bar scroll with button behavior\n        }\n    }\n    emulateInactive() {\n        this.host.removeAttribute('cds-active');\n    }\n}\n"],"names":["active","target","addInitializer","instance","ActiveController","constructor","host","this","addController","async","updateComplete","addEventListener","e","emulateActive","emulateInactive","disabled","setAttribute","code","preventDefault","removeAttribute"],"mappings":"AAaO,SAASA,IACZ,OAAQC,GAAWA,EAAOC,gBAAgBC,GAAa,IAAIC,EAAiBD,KAEzE,MAAMC,EACTC,YAAYC,GACRC,KAAKD,KAAOA,EACZC,KAAKD,KAAKE,cAAcD,MAE5BE,4BACUF,KAAKD,KAAKI,eAChBH,KAAKD,KAAKK,iBAAiB,WAAYC,GAAML,KAAKM,cAAcD,KAChEL,KAAKD,KAAKK,iBAAiB,aAAcC,GAAML,KAAKM,cAAcD,KAClEL,KAAKD,KAAKK,iBAAiB,SAAS,IAAMJ,KAAKO,oBAC/CP,KAAKD,KAAKK,iBAAiB,QAAQ,IAAMJ,KAAKO,oBAC9CP,KAAKD,KAAKK,iBAAiB,WAAW,IAAMJ,KAAKO,oBAErDD,cAAcD,GACLL,KAAKD,KAAKS,UACXR,KAAKD,MAAMU,aAAa,aAAc,IAE3B,UAAXJ,EAAEK,MAAoBL,EAAEX,SAAWM,KAAKD,MACxCM,EAAEM,iBAGVJ,kBACIP,KAAKD,KAAKa,gBAAgB"}