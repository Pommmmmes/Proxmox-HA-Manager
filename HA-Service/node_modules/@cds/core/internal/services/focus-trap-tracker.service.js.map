{"version":3,"file":"focus-trap-tracker.service.js","sources":["../../../../src/internal/services/focus-trap-tracker.service.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { arrayTail } from '../utils/array.js';\nimport { setAttributes } from '../utils/dom.js';\nimport { GlobalStateService } from './global.service.js';\nexport const CDS_FOCUS_TRAP_DOCUMENT_ATTR = 'cds-focus-trap';\n/**\n * FocusTrapTrackerService is a static class that keeps track of the active element with focus trap,\n * in case there are multiple in a given page.\n */\nexport class FocusTrapTrackerService {\n    static getTrapElements() {\n        return [...GlobalStateService.state.focusTrapItems];\n    }\n    static setTrapElements(elements) {\n        const htmlEl = document.querySelector('html');\n        if (htmlEl !== null) {\n            setAttributes(htmlEl, [CDS_FOCUS_TRAP_DOCUMENT_ATTR, elements.length ? '' : false]);\n        }\n        GlobalStateService.state.focusTrapItems = [...elements];\n    }\n    static removeTrapElement(element) {\n        const currentTrapEls = this.getTrapElements();\n        if (currentTrapEls.length < 1) {\n            return;\n        }\n        this.setTrapElements([...this.getTrapElements().filter(e => e.focusTrapId !== element.focusTrapId)]);\n    }\n    static setCurrent(element) {\n        if (!element?.focusTrapId) {\n            return;\n        }\n        this.setTrapElements([...this.getTrapElements().filter(e => e.focusTrapId !== element.focusTrapId), element]);\n    }\n    static activatePreviousCurrent() {\n        this.setTrapElements([...this.getTrapElements()].slice(0, -1));\n    }\n    static getCurrent() {\n        return arrayTail(this.getTrapElements()) || null;\n    }\n}\n"],"names":["CDS_FOCUS_TRAP_DOCUMENT_ATTR","FocusTrapTrackerService","static","GlobalStateService","state","focusTrapItems","elements","htmlEl","document","querySelector","setAttributes","length","element","this","getTrapElements","setTrapElements","filter","e","focusTrapId","slice","arrayTail"],"mappings":"uJAQY,MAACA,EAA+B,iBAKrC,MAAMC,EACTC,yBACI,MAAO,IAAIC,EAAmBC,MAAMC,gBAExCH,uBAAuBI,GACnB,MAAMC,EAASC,SAASC,cAAc,QACvB,OAAXF,GACAG,EAAcH,EAAQ,CAZU,mBAYqBD,EAASK,QAAS,KAE3ER,EAAmBC,MAAMC,eAAiB,IAAIC,GAElDJ,yBAAyBU,GACEC,KAAKC,kBACTH,OAAS,GAG5BE,KAAKE,gBAAgB,IAAIF,KAAKC,kBAAkBE,QAAOC,GAAKA,EAAEC,cAAgBN,EAAQM,gBAE1FhB,kBAAkBU,GACTA,GAASM,aAGdL,KAAKE,gBAAgB,IAAIF,KAAKC,kBAAkBE,QAAOC,GAAKA,EAAEC,cAAgBN,EAAQM,cAAcN,IAExGV,iCACIW,KAAKE,gBAAgB,IAAIF,KAAKC,mBAAmBK,MAAM,GAAI,IAE/DjB,oBACI,OAAOkB,EAAUP,KAAKC,oBAAsB"}