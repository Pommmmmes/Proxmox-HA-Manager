{"version":3,"file":"animate.js","sources":["../../../../src/internal/decorators/animate.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nimport { AnimationStatus, PRIVATE_ANIMATION_STATUS_ATTR_NAME, } from '../motion/interfaces.js';\nimport { runPropertyAnimations } from '../motion/utils.js';\nimport { isJsdomTest } from '../utils/environment.js';\n// decorator factory that extends the component constructor to inject animations code into it\nexport function animate(config) {\n    if (isJsdomTest()) {\n        return function () {\n            // jsdom doesn't like the class returned from the decorator below\n            // do nothing\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    return function _animationDecorator(constructor) {\n        return class extends constructor {\n            constructor() {\n                super(...arguments);\n                this._animationReady = false;\n                this._animationDemoMode = false;\n                this._animations = config;\n            }\n            updated(props) {\n                super.updated(props);\n                if (!this._animationReady && !this.hasAttribute(PRIVATE_ANIMATION_STATUS_ATTR_NAME)) {\n                    // this prevents animations from loading onpageload\n                    this.setAttribute(PRIVATE_ANIMATION_STATUS_ATTR_NAME, AnimationStatus.ready);\n                    this._animationReady = true;\n                    return;\n                }\n                if (this._animationDemoMode === true || this.hasAttribute('_demo-mode')) {\n                    // ignore if element has the _demo-mode attribute set;\n                    // _demo-mode is used for docs, static examples, and stories\n                    // _demo-mode is not intended for external use\n                    this._animationDemoMode = true;\n                    return;\n                }\n                runPropertyAnimations(props, this);\n            }\n        };\n    };\n}\n"],"names":["animate","config","isJsdomTest","constructor","super","this","_animationReady","_animationDemoMode","_animations","updated","props","hasAttribute","PRIVATE_ANIMATION_STATUS_ATTR_NAME","setAttribute","AnimationStatus","ready","runPropertyAnimations"],"mappings":"mNASO,SAASA,EAAQC,GACpB,OAAIC,IACO,aAMJ,SAA6BC,GAChC,OAAO,cAAcA,EACjBA,cACIC,oBACAC,KAAKC,iBAAkB,EACvBD,KAAKE,oBAAqB,EAC1BF,KAAKG,YAAcP,EAEvBQ,QAAQC,GAEJ,GADAN,MAAMK,QAAQC,IACTL,KAAKC,kBAAoBD,KAAKM,aAAaC,GAI5C,OAFAP,KAAKQ,aAAaD,EAAoCE,EAAgBC,YACtEV,KAAKC,iBAAkB,IAGK,IAA5BD,KAAKE,oBAA+BF,KAAKM,aAAa,cAItDN,KAAKE,oBAAqB,EAG9BS,EAAsBN,EAAOL"}