{"version":3,"file":"event.js","sources":["../../../../src/internal/decorators/event.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.\n * This software is released under MIT license.\n * The full license information can be found in LICENSE in the root directory of this project.\n */\nexport class EventEmitter {\n    constructor(target, eventName) {\n        this.target = target;\n        this.eventName = eventName;\n    }\n    emit(value, options) {\n        this.target.dispatchEvent(new CustomEvent(this.eventName, { detail: value, ...options }));\n    }\n}\n// Legacy TS Decorator\nfunction legacyEvent(descriptor, protoOrDescriptor, name) {\n    Object.defineProperty(protoOrDescriptor, name, descriptor);\n}\n// TC39 Decorators proposal\nfunction standardEvent(descriptor, element) {\n    return {\n        kind: 'method',\n        placement: 'prototype',\n        key: element.key,\n        descriptor,\n    };\n}\nexport function event() {\n    return (protoOrDescriptor, name) => {\n        const descriptor = {\n            get() {\n                return new EventEmitter(this, name !== undefined ? name : protoOrDescriptor.key);\n            },\n            enumerable: true,\n            configurable: true,\n        };\n        return name !== undefined\n            ? legacyEvent(descriptor, protoOrDescriptor, name)\n            : standardEvent(descriptor, protoOrDescriptor);\n    };\n}\n"],"names":["EventEmitter","constructor","target","eventName","this","emit","value","options","dispatchEvent","CustomEvent","detail","event","protoOrDescriptor","name","descriptor","get","undefined","key","enumerable","configurable","Object","defineProperty","legacyEvent","element","kind","placement","standardEvent"],"mappings":"AAKO,MAAMA,EACTC,YAAYC,EAAQC,GAChBC,KAAKF,OAASA,EACdE,KAAKD,UAAYA,EAErBE,KAAKC,EAAOC,GACRH,KAAKF,OAAOM,cAAc,IAAIC,YAAYL,KAAKD,UAAW,CAAEO,OAAQJ,KAAUC,MAgB/E,SAASI,IACZ,MAAO,CAACC,EAAmBC,KACvB,MAAMC,EAAa,CACfC,MACI,OAAO,IAAIf,EAAaI,UAAeY,IAATH,EAAqBA,EAAOD,EAAkBK,MAEhFC,YAAY,EACZC,cAAc,GAElB,YAAgBH,IAATH,EArBf,SAAqBC,EAAYF,EAAmBC,GAChDO,OAAOC,eAAeT,EAAmBC,EAAMC,GAqBrCQ,CAAYR,EAAYF,EAAmBC,GAlBzD,SAAuBC,EAAYS,GAC/B,MAAO,CACHC,KAAM,SACNC,UAAW,YACXR,IAAKM,EAAQN,IACbH,WAAAA,GAcMY,CAAcZ,EAAYF"}